<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=utf8"/>
<script type="text/javascript" src="http://d3js.org/d3.v2.js"></script>
</head>
<body>
<h1>Hello</h1>
<div id="chart"></div>
<script type="text/javascript">
var r = 960,
    vis = d3.select('#chart')
        .append('svg')
        .attr('width', r)
        .attr('height', r);

d3.json('counts/', function(json) {
    var ix = 960, 
        iy = 0,
        rad = function(x) { return x.count / 100.0; },
        node = vis.selectAll('g.node')
            .data(json.bikes)
            .enter()
            .append('g')
            .attr('class', 'node')
            .attr('transform', function(d) { ix += 2*rad(d); if (ix + rad(d) > 960) { ix = 2*rad(d); iy += 2*rad(d); } return 'translate(' + ix + ',' + iy + ')'; });

    //node.append('title')
    //    .text(function(d) { return d.number; });

    node.append('circle')
        .attr('r', function(d) { return rad(d); });
});
</script>
</body>
</html>
