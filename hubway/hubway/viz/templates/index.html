<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=utf8"/>
<script type="text/javascript" src="http://d3js.org/d3.v2.js"></script>
<style type="text/css">
g.node circle {
    fill: rgb(255,255,255);
    stroke: rgb(0,0,0);
    stroke-width: 0.5;
    cursor: pointer;
}
</style>
</head>
<body>
<h1>Hello</h1>
<div id="chart"></div>
<script type="text/javascript">
var r = 768,
    vis = d3.select('#chart')
        .append('svg')
        .attr('width', r)
        .attr('height', r),
    bubble = d3.layout.pack()
        .sort(function(a,b){ return b.count - a.count; })
        .children(function(d){ return d.bikes; })
        .value(function(d){ return d.count; })
        .size([r,r])
        .padding(1.5),
    json = { bikes: [
        {number: '10', count: 1000},
        {number: '9', count: 800},
        {number: '8', count: 700},
        {number: '7', count: 500}
    ]};

d3.json('counts/', function(json) {
    var node = vis.selectAll('g.node')
            .data(bubble.nodes(json)
                .filter(function(d) { return !d.children; }))
            .enter()
            .append('g')
            .attr('class', 'node')
            .attr('transform', function(d) { 
                return 'translate(' + d.x + ',' + d.y + ')';
            });

    node.append('title')
        .text(function(d) { return d.value; });

    node.append('circle')
        .attr('r', function(d) { return d.r; });

    node.on('mouseover', function(d,i) {
        var node = d3.select(this);
        
        node.select('circle')
            .transition()
            .style('fill', 'rgb(51,204,51)');
    });
    
    node.on('mouseout', function(d,i) {
        var node = d3.select(this);
        
        node.select('circle')
            .transition()
            .style('fill', null);
    });
    
    node.on('click', function(d,i1) {
        var node = d3.select(this);
            
        var others = d3.selectAll('g.node')
            .select('circle')
            .filter(function(d,i2) { return i1 != i2 })
            .remove();
            
        node.transition()
            .duration(2000)
            .attr('transform', 'translate(' + (r / 2) + ',' + (r / 2) + ')')
            .select('circle')
            .attr('r', r / 3);
    });
});
</script>
</body>
</html>
