<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=utf8"/>
<script type="text/javascript" src="http://d3js.org/d3.v2.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<style type="text/css">
body {
    font-family: Arial, Helvetica, sans-serif;
}

h1 {
    display: inline;
}

div#controls {
    position:absolute;
    z-index:10;
}

div#chart {
    position:absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    z-index: 9;
}

g path {
    stroke-linecap: round;
    stroke-width: 0.01px;
    stroke: #000;
    fill: #fff;
}
</style>
</head>
<body>
<div id="controls">
<h1>Hubway Challenge Map</h1>
</div>
<div id="chart"></div>
<script type="text/javascript">
var h = document.body.clientHeight,
    w = document.body.clientWidth,
    margin = {top: 60, right: 25, bottom: 25, left: 25},
    width = w - margin.left - margin.right,
    height = h - margin.top - margin.bottom,
    zoom = d3.behavior.zoom();

zoom.scale([95]);
zoom.translate([-34500.34993394186,-17880.63270005254]);

var vis = d3.select('#chart')
        .append('svg')
        .attr('width', w)
        .attr('height', h)
        .attr('pointer-events', 'all')
        .append('g')
        .call(zoom.on('zoom', redraw))
        .append('g')
        .attr('transform', 'translate(-34500.34993394186,-17880.63270005254)scale(95.00950852026126)');

function map() {
    d3.json('districts/', function(collection) {
        vis.selectAll('path')
            .data(collection.features)
            .enter()
            .append('path')
            .attr('d', d3.geo.path().projection(d3.geo.mercator()));

        vis.on('mousewheel', function(){
            alert('wheel!');
        });
    });
};

function redraw() {
    vis.attr('transform', 'translate(' + d3.event.translate + ')scale(' + d3.event.scale + ')');
};

map();
</script>
</body>
</html>
